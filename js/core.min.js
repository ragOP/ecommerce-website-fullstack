// Copyright Ginigo Ltd, Funnelish™ 2024, All rights reserved.
// Updated at Wed 03 Jul 2024, 04:31

"use strict";function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function(t,e,r){return t[e]=r}}function wrap(t,e,r,n){e=e&&e.prototype instanceof Generator?e:Generator,e=Object.create(e.prototype),n=new Context(n||[]);return o(e,"_invoke",{value:makeInvokeMethod(t,r,n)}),e}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var i={},d=(define(i,a,function(){return this}),Object.getPrototypeOf),d=d&&d(d(values([]))),g=(d&&d!==r&&n.call(d,a)&&(i=d),GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(i));function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t)})})}function AsyncIterator(t,e){function invoke(r,o,i,a){var u,r=tryCatch(t[r],t,o);if("throw"!==r.type)return(o=(u=r.arg).value)&&"object"==_typeof(o)&&n.call(o,"__await")?e.resolve(o.__await).then(function(t){invoke("next",t,i,a)},function(t){invoke("throw",t,i,a)}):e.resolve(o).then(function(t){u.value=t,i(u)},function(t){return invoke("throw",t,i,a)});a(r.arg)}var r;o(this,"_invoke",{value:function(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){c=function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=tryCatch(o,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(c,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;c=tryCatch(e,r,n);if("normal"===c.type){if(o=n.done?s:l,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=s,n.method="throw",n.arg=c.arg)}}}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var o,r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return o=-1,(r=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next}).next=r}throw new TypeError(_typeof(e)+" is not iterable")}return o(g,"constructor",{value:GeneratorFunction.prototype=GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this}),define(g,"toString",function(){return"[object Generator]"}),e.keys=function(t){var n,e=Object(t),r=[];for(n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,o,r=this.tryEntries[e];if(r.tryLoc===t)return"throw"===(n=r.completion).type&&(o=n.arg,resetTryEntry(r)),o}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function ownKeys(e,r){var o,t=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)),t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===r?String:Number)(t);e=e.call(t,r||"default");if("object"!=_typeof(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}var currencies=_createClass(function currencies(){_classCallCheck(this,currencies),this.list={AED:"د.إ;",AFN:"Afs",ALL:"L",AMD:"AMD",ANG:"NAƒ",AOA:"Kz",ARS:"ARS",AUD:"A$",AWG:"ƒ",AZN:"AZN",BAM:"KM",BBD:"Bds$",BDT:"৳",BGN:"BGN",BHD:".د.ب",BIF:"FBu",BMD:"BD$",BND:"B$",BOB:"Bs.",BRL:"R$",BSD:"B$",BTN:"Nu.",BWP:"P",BYR:"Br",BZD:"BZ$",CAD:"$",CDF:"F",CHF:"Fr.",CLP:"$",CNY:"¥",COP:"Col$",CRC:"₡",CUC:"$",CVE:"Esc",CZK:"Kč",DJF:"Fdj",DKK:"Kr",DOP:"RD$",DZD:"د.ج",EEK:"KR",EGP:"£",ERN:"Nfa",ETB:"Br",EUR:"€",FJD:"FJ$",FKP:"£",GBP:"£",GEL:"GEL",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GQE:"CFA",GTQ:"Q",GYD:"GY$",HKD:"HK$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"₹",IQD:"د.ع",IRR:"IRR",ISK:"kr",JMD:"J$",JOD:"JOD",JPY:"¥",KES:"KSh",KGS:"сом",KHR:"៛",KMF:"KMF",KPW:"W",KRW:"W",KWD:"KWD",KYD:"KY$",KZT:"T",LAK:"KN",LBP:"£",LKR:"Rs",LRD:"L$",LSL:"M",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"MDL",MGA:"FMG",MKD:"MKD",MMK:"K",MNT:"₮",MOP:"P",MRO:"UM",MUR:"Rs",MVR:"Rf",MWK:"MK",MXN:"MXN",MYR:"RM",MZM:"MTn",NAD:"N$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"NRs",NZD:"NZ$",OMR:"OMR",PAB:"B./",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"Rs.",PLN:"zł",PYG:"₲",QAR:"QR",RON:"L",RSD:"din.",RUB:"R",SAR:"SR",SBD:"SI$",SCR:"SR",SDG:"SDG",SEK:"kr",SGD:"S$",SHP:"£",SLL:"Le",SOS:"Sh.",SRD:"$",SYP:"LS",SZL:"E",THB:"฿",TJS:"TJS",TMT:"m",TND:"DT",TRY:"TRY",TTD:"TT$",TWD:"NT$",TZS:"TZS",UAH:"UAH",UGX:"USh",USD:"$",UYU:"$U",UZS:"UZS",VEB:"Bs",VND:"₫",VUV:"VT",WST:"WS$",XAF:"CFA",XCD:"EC$",XDR:"SDR",XOF:"CFA",XPF:"F",YER:"YER",ZAR:"R",ZMK:"ZK",ZWR:"Z$"}},[{key:"getSymbol",value:function(code){return"RON"===code?"lei":this.list[code]||"$"}},{key:"format",value:function(code){return"RON"!==code?"{CURRENCY} {PRICE}":"{PRICE} {CURRENCY}"}},{key:"formatPrice",value:function(price,currencyCode){var defaultFormat=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",defaultFormat=defaultFormat||this.format(currencyCode);return defaultFormat=(defaultFormat=defaultFormat.replace(new RegExp("{PRICE}","g"),price)).replace(new RegExp("{CURRENCY}","g"),this.getSymbol(currencyCode))}}]),countries=_createClass(function countries(core){_classCallCheck(this,countries),this.country=core.getCookie("x-country_code")||"",this.city=core.getCookie("x-geo-city")||"",this.latitude=core.getCookie("x-geo-latitude")||"",this.longitude=core.getCookie("x-geo-longitude")||"",this.list=[{l:"Select a country",disabled:!0,c:""},{l:"United States",c:"US"},{l:"United Kingdom",c:"GB"},{l:"Canada",c:"CA"},{l:"Australia",c:"AU"},{l:"New Zealand",c:"NZ"},{l:"",disabled:!0,c:""},{l:"Afghanistan",c:"AF"},{l:"land Islands",c:"AX"},{l:"Albania",c:"AL"},{l:"Algeria",c:"DZ"},{l:"American Samoa",c:"AS"},{l:"AndorrA",c:"AD"},{l:"Angola",c:"AO"},{l:"Anguilla",c:"AI"},{l:"Antarctica",c:"AQ"},{l:"Antigua and Barbuda",c:"AG"},{l:"Argentina",c:"AR"},{l:"Armenia",c:"AM"},{l:"Aruba",c:"AW"},{l:"Australia",c:"AU"},{l:"Austria",c:"AT"},{l:"Azerbaijan",c:"AZ"},{l:"Bahamas",c:"BS"},{l:"Bahrain",c:"BH"},{l:"Bangladesh",c:"BD"},{l:"Barbados",c:"BB"},{l:"Belarus",c:"BY"},{l:"Belgium",c:"BE"},{l:"Belize",c:"BZ"},{l:"Benin",c:"BJ"},{l:"Bermuda",c:"BM"},{l:"Bhutan",c:"BT"},{l:"Bolivia",c:"BO"},{l:"Bosnia and Herzegovina",c:"BA"},{l:"Botswana",c:"BW"},{l:"Bouvet Island",c:"BV"},{l:"Brazil",c:"BR"},{l:"British Indian Ocean Territory",c:"IO"},{l:"Brunei Darussalam",c:"BN"},{l:"Bulgaria",c:"BG"},{l:"Burkina Faso",c:"BF"},{l:"Burundi",c:"BI"},{l:"Cambodia",c:"KH"},{l:"Cameroon",c:"CM"},{l:"Canada",c:"CA"},{l:"Cape Verde",c:"CV"},{l:"Cayman Islands",c:"KY"},{l:"Central African Republic",c:"CF"},{l:"Chad",c:"TD"},{l:"Chile",c:"CL"},{l:"China",c:"CN"},{l:"Christmas Island",c:"CX"},{l:"Cocos (Keeling) Islands",c:"CC"},{l:"Colombia",c:"CO"},{l:"Comoros",c:"KM"},{l:"Congo",c:"CG"},{l:"Congo, The Democratic Republic of the",c:"CD"},{l:"Cook Islands",c:"CK"},{l:"Costa Rica",c:"CR"},{l:"Cote D'Ivoire",c:"CI"},{l:"Croatia",c:"HR"},{l:"Cuba",c:"CU"},{l:"Cyprus",c:"CY"},{l:"Czech Republic",c:"CZ"},{l:"Denmark",c:"DK"},{l:"Djibouti",c:"DJ"},{l:"Dominica",c:"DM"},{l:"Dominican Republic",c:"DO"},{l:"Ecuador",c:"EC"},{l:"Egypt",c:"EG"},{l:"El Salvador",c:"SV"},{l:"Equatorial Guinea",c:"GQ"},{l:"Eritrea",c:"ER"},{l:"Estonia",c:"EE"},{l:"Ethiopia",c:"ET"},{l:"Falkland Islands (Malvinas)",c:"FK"},{l:"Faroe Islands",c:"FO"},{l:"Fiji",c:"FJ"},{l:"Finland",c:"FI"},{l:"France",c:"FR"},{l:"French Guiana",c:"GF"},{l:"French Polynesia",c:"PF"},{l:"French Southern Territories",c:"TF"},{l:"Gabon",c:"GA"},{l:"Gambia",c:"GM"},{l:"Georgia",c:"GE"},{l:"Germany",c:"DE"},{l:"Ghana",c:"GH"},{l:"Gibraltar",c:"GI"},{l:"Greece",c:"GR"},{l:"Greenland",c:"GL"},{l:"Grenada",c:"GD"},{l:"Guadeloupe",c:"GP"},{l:"Guam",c:"GU"},{l:"Guatemala",c:"GT"},{l:"Guernsey",c:"GG"},{l:"Guinea",c:"GN"},{l:"Guinea-Bissau",c:"GW"},{l:"Guyana",c:"GY"},{l:"Haiti",c:"HT"},{l:"Heard Island and Mcdonald Islands",c:"HM"},{l:"Holy See (Vatican City State)",c:"VA"},{l:"Honduras",c:"HN"},{l:"Hong Kong",c:"HK"},{l:"Hungary",c:"HU"},{l:"Iceland",c:"IS"},{l:"India",c:"IN"},{l:"Indonesia",c:"c"},{l:"Iran, Islamic Republic Of",c:"IR"},{l:"Iraq",c:"IQ"},{l:"Ireland",c:"IE"},{l:"Isle of Man",c:"IM"},{l:"Israel",c:"IL"},{l:"Italy",c:"IT"},{l:"Jamaica",c:"JM"},{l:"Japan",c:"JP"},{l:"Jersey",c:"JE"},{l:"Jordan",c:"JO"},{l:"Kazakhstan",c:"KZ"},{l:"Kenya",c:"KE"},{l:"Kiribati",c:"KI"},{l:"Korea, Democratic People'S Republic of",c:"KP"},{l:"Korea, Republic of",c:"KR"},{l:"Kuwait",c:"KW"},{l:"Kyrgyzstan",c:"KG"},{l:"Lao People'S Democratic Republic",c:"LA"},{l:"Latvia",c:"LV"},{l:"Lebanon",c:"LB"},{l:"Lesotho",c:"LS"},{l:"Liberia",c:"LR"},{l:"Libyan Arab Jamahiriya",c:"LY"},{l:"Liechtenstein",c:"LI"},{l:"Lithuania",c:"LT"},{l:"Luxembourg",c:"LU"},{l:"Macao",c:"MO"},{l:"Macedonia, The Former Yugoslav Republic of",c:"MK"},{l:"Madagascar",c:"MG"},{l:"Malawi",c:"MW"},{l:"Malaysia",c:"MY"},{l:"Maldives",c:"MV"},{l:"Mali",c:"ML"},{l:"Malta",c:"MT"},{l:"Marshall Islands",c:"MH"},{l:"Martinique",c:"MQ"},{l:"Mauritania",c:"MR"},{l:"Mauritius",c:"MU"},{l:"Mayotte",c:"YT"},{l:"Mexico",c:"MX"},{l:"Micronesia, Federated States of",c:"FM"},{l:"Moldova, Republic of",c:"MD"},{l:"Monaco",c:"MC"},{l:"Mongolia",c:"MN"},{l:"Montenegro",c:"ME"},{l:"Montserrat",c:"MS"},{l:"Morocco",c:"MA"},{l:"Mozambique",c:"MZ"},{l:"Myanmar",c:"MM"},{l:"Namibia",c:"NA"},{l:"Nauru",c:"NR"},{l:"Nepal",c:"NP"},{l:"Netherlands",c:"NL"},{l:"Netherlands Antilles",c:"AN"},{l:"New Caledonia",c:"NC"},{l:"New Zealand",c:"NZ"},{l:"Nicaragua",c:"NI"},{l:"Niger",c:"NE"},{l:"Nigeria",c:"NG"},{l:"Niue",c:"NU"},{l:"Norfolk Island",c:"NF"},{l:"Northern Mariana Islands",c:"MP"},{l:"Norway",c:"NO"},{l:"Oman",c:"OM"},{l:"Pakistan",c:"PK"},{l:"Palau",c:"PW"},{l:"Palestinian Territory, Occupied",c:"PS"},{l:"Panama",c:"PA"},{l:"Papua New Guinea",c:"PG"},{l:"Paraguay",c:"PY"},{l:"Peru",c:"PE"},{l:"Philippines",c:"PH"},{l:"Pitcairn",c:"PN"},{l:"Poland",c:"PL"},{l:"Portugal",c:"PT"},{l:"Puerto Rico",c:"PR"},{l:"Qatar",c:"QA"},{l:"Reunion",c:"RE"},{l:"Romania",c:"RO"},{l:"Russian Federation",c:"RU"},{l:"RWANDA",c:"RW"},{l:"Saint Helena",c:"SH"},{l:"Saint Kitts and Nevis",c:"KN"},{l:"Saint Lucia",c:"LC"},{l:"Saint Pierre and Miquelon",c:"PM"},{l:"Saint Vincent and the Grenadines",c:"VC"},{l:"Samoa",c:"WS"},{l:"San Marino",c:"SM"},{l:"Sao Tome and Principe",c:"ST"},{l:"Saudi Arabia",c:"SA"},{l:"Senegal",c:"SN"},{l:"Serbia",c:"RS"},{l:"Seychelles",c:"SC"},{l:"Sierra Leone",c:"SL"},{l:"Singapore",c:"SG"},{l:"Slovakia",c:"SK"},{l:"Slovenia",c:"SI"},{l:"Solomon Islands",c:"SB"},{l:"Somalia",c:"SO"},{l:"South Africa",c:"ZA"},{l:"South Georgia and the South Sandwich Islands",c:"GS"},{l:"Spain",c:"ES"},{l:"Sri Lanka",c:"LK"},{l:"Sudan",c:"SD"},{l:"Suriname",c:"SR"},{l:"Svalbard and Jan Mayen",c:"SJ"},{l:"Swaziland",c:"SZ"},{l:"Sweden",c:"SE"},{l:"Switzerland",c:"CH"},{l:"Syrian Arab Republic",c:"SY"},{l:"Taiwan, Province of China",c:"TW"},{l:"Tajikistan",c:"TJ"},{l:"Tanzania, United Republic of",c:"TZ"},{l:"Thailand",c:"TH"},{l:"Timor-Leste",c:"TL"},{l:"Togo",c:"TG"},{l:"Tokelau",c:"TK"},{l:"Tonga",c:"TO"},{l:"Trinidad and Tobago",c:"TT"},{l:"Tunisia",c:"TN"},{l:"Turkey",c:"TR"},{l:"Turkmenistan",c:"TM"},{l:"Turks and Caicos Islands",c:"TC"},{l:"Tuvalu",c:"TV"},{l:"Uganda",c:"UG"},{l:"Ukraine",c:"UA"},{l:"United Arab Emirates",c:"AE"},{l:"United Kingdom",c:"GB"},{l:"United States",c:"US"},{l:"United States Minor Outlying Islands",c:"UM"},{l:"Uruguay",c:"UY"},{l:"Uzbekistan",c:"UZ"},{l:"Vanuatu",c:"VU"},{l:"Venezuela",c:"VE"},{l:"Viet Nam",c:"VN"},{l:"Virgin Islands, British",c:"VG"},{l:"Virgin Islands, U.S.",c:"VI"},{l:"Wallis and Futuna",c:"WF"},{l:"Western Sahara",c:"EH"},{l:"Yemen",c:"YE"},{l:"Zambia",c:"ZM"},{l:"Zimbabwe",c:"ZW"}]}),beforeAfterSlider=_createClass(function beforeAfterSlider(){_classCallCheck(this,beforeAfterSlider),this.init()},[{key:"init",value:function(){var _this2=this;this.sliders=document.querySelectorAll(".before-after-slider"),this.sliders.forEach(function(slider){var active=!1,scroller=slider.querySelector(".bas-scroller"),wrapper=slider.querySelector(".bas-wrapper");function addScrolling(){active=!0,scroller.classList.add("scrolling")}function removeScrolling(){active=!1,scroller.classList.remove("scrolling")}console.log("beforeAfterSlider",_this2.sliders),scroller&&wrapper&&(scroller.addEventListener("mousedown",addScrolling),document.body.addEventListener("mouseup",removeScrolling),document.body.addEventListener("mouseleave",removeScrolling),document.body.addEventListener("mousemove",function(e){active&&(e.preventDefault(),e=e.pageX,e-=wrapper.getBoundingClientRect().left,_this2.scrollIt(wrapper,scroller,e))}),scroller.addEventListener("touchstart",addScrolling),document.body.addEventListener("touchcancel",removeScrolling),document.body.addEventListener("touchend",removeScrolling),document.body.addEventListener("touchmove",function(e){active&&(e.preventDefault(),e=(e.touches[0]||e.targetTouches[0]).pageX,e-=wrapper.getBoundingClientRect().left,_this2.scrollIt(wrapper,scroller,e))}))})}},{key:"percent",value:function(sub,total){return sub?!total||total<sub?100:100*sub/total:0}},{key:"scrollIt",value:function(wrapper,scroller,x){x=Math.max(0,Math.min(x,wrapper.offsetWidth)),x=this.percent(x,wrapper.offsetWidth);wrapper.querySelector(".bas-after img").style.clipPath="inset(0 ".concat(100-x,"% 0 0)"),scroller.style.left="calc(".concat(x,"% - 25px)")}}]),stepTypes=_createClass(function stepTypes(){_classCallCheck(this,stepTypes),this.Unknown=0,this.OrderForm=1,this.OTO=2,this.Upsell=2,this.TYP=3,this.Downsell=4,this.Optin=5,this.Other=6}),imagesSlider=_createClass(function imagesSlider(){var _this3=this;_classCallCheck(this,imagesSlider),this.transitionCallback=null,document.querySelectorAll(".image-slider .is-thumbnails").forEach(function(tc){tc.addEventListener("transitionend",function(e){e.target===tc&&_this3.transitionCallback&&_this3.transitionCallback()})}),document.querySelectorAll(".image-slider").forEach(function(slider){var length=_this3.length(slider),next=(_this3.thumbs(slider).forEach(function(thumb,i){thumb.addEventListener("click",function(){return _this3.select(slider,i)})}),slider.querySelector(".next")),prev=slider.querySelector(".prev");next.addEventListener("click",function(){var index=_this3.currentIndex(slider)+1;_this3.select(slider,index=length<=index?0:index)}),prev.addEventListener("click",function(){var index=_this3.currentIndex(slider)-1;_this3.select(slider,index=index<0?length-1:index)})})},[{key:"currentIndex",value:function(slider){for(var thumbs=slider.querySelectorAll(".is-thumbnail"),i=0;i<thumbs.length;i++)if(thumbs[i].classList.contains("selected"))return i;return 0}},{key:"rect",value:function(e){return e.getBoundingClientRect()}},{key:"totalWidth",value:function(slider,index){var thumbs=this.thumbs(slider),slider=slider.querySelector(".is-thumbnails"),thumbs=thumbs[index=index<0||index>=thumbs.length?thumbs.length-1:index],index=this.rect(thumbs),thumbs=this.rect(slider);return index.right-thumbs.left}},{key:"slideWidth",value:function(slider,index){slider=this.thumbs(slider);return index<0||index>=slider.length?0:slider[index].offsetWidth}},{key:"transition",value:function(slider,newIndex,prevIndex,coord,done){this.transitionCallback=done;done=slider.querySelector(".is-thumbnails");done.style.transition="transform 300ms ease-in-out",done.style.transform="translate(".concat(coord.x,"px,").concat(coord.y,"px)")}},{key:"isVertical",value:function(){return!1}},{key:"translate",value:function(slider,position){slider.querySelector(".is-thumbnails").style.transform="translate".concat(this.isVertical()?"Y":"X","(").concat(position,"px)")}},{key:"toPosition",value:function(slider,index){return-1*(this.totalWidth(slider,index)-this.slideWidth(slider,index)+this.offset(slider,index))}},{key:"offset",value:function(slider,index){index=this.slideWidth(slider,index);return-(slider.clientWidth-index)/2}},{key:"toCoord",value:function(position){return{x:this.isVertical()?0:position,y:this.isVertical()?position:0}}},{key:"length",value:function(slider){return this.thumbs(slider).length}},{key:"thumbs",value:function(slider){return slider.querySelectorAll(".is-thumbnail")}},{key:"select",value:function(slider,index){var _this4=this,thumbs=this.thumbs(slider),img=slider.querySelector(".is-image-wrapper img"),pos=(thumbs.forEach(function(thumb,i){i===index?(thumb.classList.add("selected"),img.setAttribute("src",thumb.dataset.img),img.setAttribute("srcset",thumb.dataset.img+" 1x")):thumb.classList.remove("selected")}),this.toPosition(slider,index));this.transition(slider,index,this.currentIndex(slider),this.toCoord(pos),function(){_this4.translate(slider,pos)})}}]);function modalTrigger(callback,options){function scrollTop(){return window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop}function winHeight(){return window.innerHeight||(document.documentElement||document.body).clientHeight}function docHeight(){var D=document;return Math.max(D.body.scrollHeight,D.documentElement.scrollHeight,D.body.offsetHeight,D.documentElement.offsetHeight,D.body.clientHeight,D.documentElement.clientHeight)}this.complete=!1,this.callback=callback,this.timer=null,this.interval=null,this.options=function(){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(arguments[0][key]=arguments[i][key]);return arguments[0]}({},{trigger:"exitIntent",target:"",timeout:0,percentDown:50,percentUp:10,scrollInterval:1e3},options),this.init=function(){var targetScroll,parentThis,self,trackLength,scrollStartPer,pageHeight,_self;"exitIntent"===this.options.trigger||"exit_intent"===this.options.trigger?(parentThis=this,document.addEventListener("mouseleave",function mouseLeaveHandler(e){!parentThis.complete&&e.clientY<0&&(parentThis.callback(),parentThis.complete=!0,document.removeEventListener("mouseleave",mouseLeaveHandler))})):"target"===this.options.trigger?""!==this.options.target&&(this.options.target?this.complete=!0:(targetScroll=this.options.target.offsetTop,(parentThis=this).interval=setInterval(function(){window.scrollTop>=targetScroll&&(clearInterval(parentThis.interval),parentThis.interval=null,parentThis.complete||(parentThis.callback(),parentThis.complete=!0))},this.options.scrollInterval))):"scrollDown"===this.options.trigger?(scrollTop(),pageHeight=winHeight(),self=this,0<pageHeight&&window.addEventListener("scroll",function(){var trackLength=docHeight()-winHeight();Math.floor(scrollTop()/trackLength*100)>=parseFloat(self.options.percentDown)&&(self.complete||(self.callback(),self.complete=!0))})):"scrollUp"===this.options.trigger?(trackLength=docHeight()-winHeight(),scrollStartPer=Math.floor(scrollTop()/trackLength*100),pageHeight=winHeight(),_self=this,0<pageHeight&&window.addEventListener("scroll",function(){var pctScrolled=Math.floor(scrollTop()/trackLength*100);(scrollStartPer=scrollStartPer<pctScrolled?pctScrolled:scrollStartPer)-pctScrolled>=parseFloat(_self.options.percentUp)&&(_self.complete||(_self.callback(),_self.complete=!0))})):"timeout"===this.options.trigger&&(this.timer=setTimeout(this.callback,this.options.timeout))},this.cancel=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null),null!==this.interval&&(clearInterval(this.interval),this.interval=null),this.complete=!0},this.init()}var smoothScroll=_createClass(function smoothScroll(){_classCallCheck(this,smoothScroll),this.ignore='a[href="#submit-step"],a[href="#next-step"],a[href^="#yes-link"],a[href="#no-link"],a[href="#submit-1st-step"]',this.topOnEmptyHash=!1,this.animationInterval=null,this.easing="easeOutCubic",this.selector='a[href*="#"]:not(a[href="#submit-step"],a[href="#next-step"],a[href^="#yes-link"],a[href="#no-link"],a[href="#submit-1st-step"])',this.speed=500,this.speedAsDuration=!1,this.durationMax=1300,this.durationMin=300;try{this.init()}catch(e){console.warn(e)}},[{key:"escapeCharacters",value:function(id){"#"===id.charAt(0)&&(id=id.substr(1));for(var codeUnit,string=String(id),length=string.length,index=-1,result="",firstCodeUnit=string.charCodeAt(0);++index<length;){if(0===(codeUnit=string.charCodeAt(index)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");1<=codeUnit&&codeUnit<=31||127==codeUnit||0===index&&48<=codeUnit&&codeUnit<=57||1===index&&48<=codeUnit&&codeUnit<=57&&45===firstCodeUnit?result+="\\"+codeUnit.toString(16)+" ":result+=128<=codeUnit||45===codeUnit||95===codeUnit||48<=codeUnit&&codeUnit<=57||65<=codeUnit&&codeUnit<=90||97<=codeUnit&&codeUnit<=122?string.charAt(index):"\\"+string.charAt(index)}return"#"+result}},{key:"popstateHandler",value:function(){var anchor;null===history.state||!history.state.smoothScroll||"string"==typeof(anchor=history.state.anchor)&&anchor&&!(anchor=document.querySelector(this.escapeCharacters(history.state.anchor)))||this.animateScroll(anchor,null)}},{key:"clickHandler",value:function(event){if(!event.defaultPrevented&&!(0!==event.button||event.metaKey||event.ctrlKey||event.shiftKey)&&"closest"in event.target){var hash,anchor,toggle=event.target.closest(this.selector);if(toggle&&"a"===toggle.tagName.toLowerCase()&&!event.target.closest(this.ignore)&&toggle.hostname===window.location.hostname&&toggle.pathname===window.location.pathname&&/#/.test(toggle.href)){try{hash=this.escapeCharacters(decodeURIComponent(toggle.hash))}catch(e){hash=this.escapeCharacters(toggle.hash)}if("#"===hash){if(!this.topOnEmptyHash)return;anchor=document.documentElement}else anchor=document.querySelector(hash);(anchor=anchor||"#top"!==hash?anchor:document.documentElement)&&(event.preventDefault(),this.setHistory(),this.animateScroll(anchor,toggle))}}}},{key:"setHistory",value:function(){var hash;history.replaceState&&!history.state&&(hash=(hash=window.location.hash)||"",history.replaceState({anchor:hash||window.pageYOffset},document.title,hash||window.location.href))}},{key:"cancelScroll",value:function(){cancelAnimationFrame(this.animationInterval),this.animationInterval=null}},{key:"animateScroll",value:function(anchor){var startLocation,endLocation,distance,documentHeight,timeLapsed,speed,start,percentage,stopAnimateScroll,_this5=this,updateUrl=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],isNum=(this.cancelScroll(),"[object Number]"===Object.prototype.toString.call(anchor)),anchorElem=isNum||!anchor.tagName?null:anchor;(isNum||anchorElem)&&(startLocation=window.pageYOffset,endLocation=isNum?anchor:this.getEndLocation(anchorElem),distance=endLocation-startLocation,documentHeight=this.getDocumentHeight(),timeLapsed=0,speed=this.getSpeed(distance),stopAnimateScroll=function(position,endLocation){var currentLocation=window.pageYOffset;if(position==endLocation||currentLocation==endLocation||(startLocation<endLocation&&window.innerHeight+currentLocation)>=documentHeight)return _this5.cancelScroll(!0),_this5.adjustFocus(anchor,endLocation,isNum),start=null,!(_this5.animationInterval=null)},anchorElem=function loopAnimateScroll(timestamp){timeLapsed+=timestamp-(start=start||timestamp),percentage=1<(percentage=0===speed?0:timeLapsed/speed)?1:percentage,percentage=startLocation+distance*_this5.easingPattern(percentage),window.scrollTo(0,Math.floor(percentage)),stopAnimateScroll(percentage,endLocation)||(_this5.animationInterval=window.requestAnimationFrame(loopAnimateScroll),start=timestamp)},0===window.pageYOffset&&window.scrollTo(0,0),updateUrl&&this.updateURL(anchor,isNum),this.reduceMotion()?this.adjustFocus(anchor,Math.floor(endLocation),!1):(this.cancelScroll(!0),window.requestAnimationFrame(anchorElem)))}},{key:"reduceMotion",value:function(){return!!("matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches)}},{key:"adjustFocus",value:function(anchor,endLocation,isNum){0===anchor&&document.body.focus(),isNum||(anchor.focus(),document.activeElement!==anchor&&(anchor.setAttribute("tabindex","-1"),anchor.focus(),anchor.style.outline="none"),window.scrollTo(0,endLocation))}},{key:"easingPattern",value:function(time){var pattern;return"easeInQuad"===this.easing&&(pattern=time*time),"easeOutQuad"===this.easing&&(pattern=time*(2-time)),"easeInOutQuad"===this.easing&&(pattern=time<.5?2*time*time:(4-2*time)*time-1),"easeInCubic"===this.easing&&(pattern=time*time*time),"easeOutCubic"===this.easing&&(pattern=--time*time*time+1),"easeInOutCubic"===this.easing&&(pattern=time<.5?4*time*time*time:(time-1)*(2*time-2)*(2*time-2)+1),"easeInQuart"===this.easing&&(pattern=time*time*time*time),"easeOutQuart"===this.easing&&(pattern=1- --time*time*time*time),"easeInOutQuart"===this.easing&&(pattern=time<.5?8*time*time*time*time:1-8*--time*time*time*time),"easeInQuint"===this.easing&&(pattern=time*time*time*time*time),"easeOutQuint"===this.easing&&(pattern=1+--time*time*time*time*time),(pattern="easeInOutQuint"===this.easing?time<.5?16*time*time*time*time*time:1+16*--time*time*time*time*time:pattern)||time}},{key:"getEndLocation",value:function(anchor){var location=0;if(anchor.offsetParent)for(;location+=anchor.offsetTop,anchor=anchor.offsetParent;);return location=Math.max(location,0),location=Math.min(location,this.getDocumentHeight()-window.innerHeight)}},{key:"getDocumentHeight",value:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}},{key:"getSpeed",value:function(distance){distance=this.speedAsDuration?this.speed:Math.abs(distance/1e3*this.speed);return this.durationMax&&distance>this.durationMax?this.durationMax:this.durationMin&&distance<this.durationMin?this.durationMin:parseInt(distance,10)}},{key:"updateURL",value:function(anchor,isNum){isNum||history.pushState&&history.pushState({anchor:anchor.id},document.title,anchor===document.documentElement?"#top":"#"+anchor.id)}},{key:"destroy",value:function(){window.removeEventListener("popstate",this.popstateHandler,!1),this.cancelScroll(),this.animationInterval=null}},{key:"init",value:function(){var _this6=this;if(!this.supports())throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";this.destroy(),document.querySelectorAll(this.selector).forEach(function(link){link.addEventListener("click",function(ev){return _this6.clickHandler(ev)})}),window.addEventListener("popstate",function(ev){return _this6.popstateHandler(ev)},!1)}},{key:"supports",value:function(){return"querySelector"in document&&"addEventListener"in window&&"requestAnimationFrame"in window&&"closest"in window.Element.prototype}}]),editorCore=function(){return _createClass(function editorCore(){_classCallCheck(this,editorCore),this.spinnerHtml='<div class="spinner btn-headline">\n        <svg xmlns="http://www.w3.org/2000/svg" width="28px" height="28px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n            <circle cx="50" cy="50" fill="none" stroke="currentColor" stroke-width="4" r="34"\n                    stroke-dasharray="70 25" transform="rotate(73.7169 50 50)">\n                <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="0.6134969325153374s"\n                                  values="0 50 50;360 50 50" keyTimes="0;1"/>\n            </circle>\n        </svg>\n    </div>',this.initEvents(),this.stepTypes=new stepTypes,this.funnelishPay=null,this.countries=new countries(this),this.currencies=new currencies,this.alive=!0,this.orderBump=null,this.pageUrl="https://"+window.location.hostname+window.location.pathname,this.pageId=this.getMeta("pageid"),this.stepId=this.getMeta("stepid"),this.funnelId=this.getMeta("funnelid"),this.userId=this.getMeta("userid"),this.version=document.querySelector('meta[name="version"]').getAttribute("content"),this.utmTags=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","_raid","_sms_id","_raeid"],this.products=PRODUCTS,this.funnel=FUNNEL,this.step=STEP,this.apps=APPS,PRODUCTS||FUNNEL||STEP||APPS?(this.discount=null,this.tax=null,this.currentCurrency=this.currency(),this.countryDetails=[]):console.error("data not found!",PRODUCTS,FUNNEL,STEP,APPS)},[{key:"isTestMode",value:function(){return this.funnel.test_mode}},{key:"isOrderForm",value:function(){return this.step.type===this.stepTypes.OrderForm}},{key:"isOTO",value:function(){return[this.stepTypes.Upsell,this.stepTypes.Downsell].includes(this.step.type)}},{key:"isTYP",value:function(){return this.step.type===this.stepTypes.TYP}},{key:"isBeta",value:function(){return"beta-v1"===this.version}},{key:"getAuthHeader",value:function(){return{step_id:this.stepId,page_id:this.pageId,user_id:this.userId,funnel_id:this.funnel.id,page_url:this.pageUrl,session_id:this.getCookie("session_id")||""}}},{key:"getMeta",value:function(id){var v=0,id=document.querySelector('meta[name="'.concat(id,'"]'));return v=id?parseInt(id.getAttribute("content")):v}},{key:"timers",value:function(){var _this=this,timersCollection=document.querySelectorAll(".timer");timersCollection.length&&timersCollection.forEach(function(timer){var expire=timer.getAttribute("data-expire"),expireUrl=timer.getAttribute("data-expire-url"),expireTarget=timer.getAttribute("data-expire-target"),hoursNode=timer.querySelector("[data-hours]"),minutesNode=timer.querySelector("[data-minutes]"),secondsNode=timer.querySelector("[data-seconds]"),timeleft=3600*(parseInt(hoursNode.innerText)||0)+60*(parseInt(minutesNode.innerText)||0)+(parseInt(secondsNode.innerText)||0),tickTackInterval=setInterval(function(){{var newHours,newMinutes,newSeconds;0<timeleft&&_this.alive?(timeleft-=1,newHours=Math.floor(timeleft/3600),newMinutes=Math.floor((timeleft-3600*newHours)/60),newSeconds=Math.floor(timeleft-3600*newHours-60*newMinutes),newHours<"10"&&(newHours="0"+newHours),newMinutes<"10"&&(newMinutes="0"+newMinutes),newSeconds<"10"&&(newSeconds="0"+newSeconds),hoursNode.innerText=newHours,minutesNode.innerText=newMinutes,secondsNode.innerText=newSeconds):(clearInterval(tickTackInterval),"goto"===expire?(expireUrl.startsWith("https://")||expireUrl.startsWith("http://")||(expireUrl="https://"+expireUrl),window.open(expireUrl,"_blank"===expireTarget?"_blank":"_self")):"hide"===expire&&timer.classList.add("hidden"))}},1e3)})}},{key:"getCurrencySymbol",value:function(){return this.currencies.getSymbol(this.currency())}},{key:"currency",value:function(){return this.funnel.currency_code}},{key:"setCurrency",value:function(currency){this.currentCurrency=currency}},{key:"setProductConfig",value:function(p,el){if(p.config)try{var nval,tag,_tag,input,c=JSON.parse(p.config)||{},color=(c.super_highlight&&el.classList.add("highlight"),c.color||"red");return c.top_tag&&(el.classList.add("top_tag"),nval=el.querySelector(".pl-nvalue"),(tag=document.createElement("span")).className="top-tag",tag.style.background=color,tag.innerHTML="".concat(c.top_tag),nval.appendChild(tag)),c.tag&&(el.classList.add("side_tag"),(_tag=document.createElement("span")).className="side-tag",_tag.style.background=color,_tag.innerHTML="".concat(c.tag),el.appendChild(_tag)),"small"===c.size&&el.classList.add("small"),c.hidden&&((input=el.querySelector('input[name="product-id"]'))?(input.classList.remove("pl-radio","pl-qty"),input.classList.add("pl-checkbox"),input.setAttribute("type","checkbox")):console.error("ERROR: product input was not found."),el.classList.add("hidden")),c.default}catch(e){console.warn("Error: Can't setup product highlighting.",p,e)}}},{key:"genProduct",value:function(p,productList,dp){var productList=productList.getAttribute("data-type"),input='<input type="radio" class="pl-radio" name="product-id" value="'.concat(p.id,'">');if("multi"===productList)input='<input type="checkbox" class="pl-checkbox" name="product-id" value="'.concat(p.id,'">');else if("qty"===productList){for(var input='<select name="product-qty" data-product-id="'.concat(p.id,'" class="pl-qty">'),i=0;i<=10;i++)input+='<option value="'.concat(i,'">').concat(i,"</option>");input+="</select>"}var productList="",u=(p.imageUrl&&(u=p.imageUrl.replace("images.funnelish.com","img.funnelish.com"),productList='<div class="pl-image">\n                    <img alt="" src="'.concat(u,'?height=220&width=220&auto=webp&fit=bounds" />\n                </div>')),'<label class="pl-inner">\n                        <div class="pl-name">\n                            '.concat(input,"\n                            ").concat(productList,'\n                            <span class="pl-nvalue">\n                                <span class="name">').concat(p.name,'</span>\n                            </span>\n                        </div>\n                        <div class="pl-price">\n                            <span class="pl-pvalue">').concat(dp,"</span>\n                        </div>\n                    </label>")),productList=document.createElement("div");return productList.classList.add("pl-item"),productList.innerHTML=u,productList.dataset.pid=p.id,productList}},{key:"setupVariants",value:function(p,el,productList){if(p.variants)try{var variantsData=JSON.parse(p.variants);if(variantsData&&variantsData.variants){var variants=variantsData.variants;if(variants.length){var sa=productList.dataset.selecta,variantsEl=document.createElement("div");variantsEl.className="pl-variants";for(var i=0;i<variants.length;i++){for(var v=variants[i],ops="",j=0;j<v.options.length;j++){var o=v.options[j],oName=o.name?o.name.replace(/"/g,"&quot;"):"";ops+='<label class="pl-variant-option '.concat(0===j?"selected":"",'">\n    <input name="variants[').concat(p.id,"][").concat(v.name,']" type="radio" value="').concat(oName,'" data-variant="').concat(v.name,'" />\n    ').concat(o.name,"\n</label>")}var variantEl=document.createElement("div");variantEl.className="pl-variant",variantEl.innerHTML='<span class="pl-variant-name">\n    <span>\n        <span class="select-a">'.concat(sa||"","</span>\n        <b>").concat(v.name,'</b>\n    </span>\n</span>\n<div class="pl-variant-options">\n    ').concat(ops,"\n</div>"),variantsEl.appendChild(variantEl)}el.appendChild(variantsEl)}}}catch(e){console.error(e)}}},{key:"loadProducts",value:function(){var plists,defProducts,updateItems,_this7=this;this.products?(plists=document.querySelectorAll(".product-list"),defProducts=[],updateItems=function(){plists.forEach(function(plist){plist.querySelectorAll(".pl-item").forEach(function(item){var inp=item.querySelector(".pl-inner>.pl-name>input,.pl-inner>.pl-name>select");"INPUT"===inp.tagName&&inp.checked||"INPUT"!==inp.tagName&&0<inp.value?item.classList.add("selected"):item.classList.remove("selected")})})},this.products.forEach(function(p){var dp;p.isOb?_this7.orderBump=p:(dp=_this7.getPrice(p,1).dp,plists.forEach(function(plist){var itemsEl=plist.querySelector(".pl-items"),el=_this7.genProduct(p,itemsEl,dp),el=itemsEl.appendChild(el);_this7.setProductConfig(p,el)&&defProducts.push(p),el.querySelector(".pl-inner>.pl-name>input,.pl-inner>.pl-name>select").addEventListener("change",function(ev){_this7.selectVariant(null,p,null,el),updateItems()}),_this7.setupVariants(p,el,plist),el.querySelectorAll(".pl-variant-option input,.pl-variant-option select").forEach(function(o){o.addEventListener("change",function(ev){var l=o.parentElement;("INPUT"===o.tagName&&o.checked||0<o.value)&&_this7.selectVariant(o,p,l,el)})})}))}),defProducts.length?defProducts.forEach(function(defProduct){document.querySelectorAll('input[name="product-id"][value="'.concat(defProduct.id,'"],\n                select[name="product-qty"][data-product-id="').concat(defProduct.id,'"]')).forEach(function(i){"INPUT"===i.tagName?i.checked=!0:i.value=1})}):document.querySelectorAll(".product-list>.pl-items .pl-item:first-child input").forEach(function(i){i.checked=!0}),document.querySelectorAll(".product-list .pl-variant-option:first-child input").forEach(function(i){i.closest("label").classList.add("selected"),i.checked=!0}),updateItems()):(this.isOrderForm()||this.isOTO())&&console.error("no products in Order Form or OTO!")}},{key:"selectVariant",value:function(optionInput,p,optionLabel,productEl){var baseImg="",optionInput=(optionInput&&optionLabel&&(optionInput.closest(".pl-variant-options").querySelectorAll(".pl-variant-option").forEach(function(op){return op.classList.remove("selected")}),optionLabel.classList.add("selected")),productEl.querySelectorAll(".pl-variant-option.selected input")),opValue=[],title=(optionInput.forEach(function(x){return opValue.push(x.value)}),opValue.filter(Boolean).join(" / ")),optionLabel=p.imageUrl||"",optionInput=this.getPrice(p,1).dp,opt=p.options?p.options.find(function(x){return x.title===title}):null,p=(opt&&(optionLabel=opt.imageUrl||optionLabel,optionInput=this.getPrice(p,1,opt.price).dp),optionLabel&&(baseImg=optionLabel=optionLabel.replace("images.funnelish.com","img.funnelish.com"),optionLabel="".concat(optionLabel,"?height=220&width=220&auto=webp&fit=bounds")),productEl.querySelector(".pl-image img")),opt=(p&&p.setAttribute("src",optionLabel),productEl.querySelector(".pl-price .pl-pvalue"));opt&&(opt.innerHTML=optionInput),this.updateSummary(),this.updateProductPreviews(baseImg)}},{key:"updateProductPreviews",value:function(img){img&&(img="".concat(img,"?auto=webp&fit=bounds"),document.querySelectorAll(".product-image-preview").forEach(function(p){!p.getAttribute("initial-image")&&p.getAttribute("src")&&p.setAttribute("initial-image",p.getAttribute("src"));var imgEl=null;p.classList.contains("image-slider")?imgEl=p.querySelector(".is-image-wrapper img"):p.classList.contains("img")&&(imgEl=p.querySelector("img")),imgEl&&(imgEl.setAttribute("src",img),imgEl.setAttribute("srcset",img+" 1x"))}))}},{key:"findProduct",value:function(id){for(var i=0;i<this.products.length;i++){var p=this.products[i];if(p.id==id)return p}return null}},{key:"getSelectedOptions",value:function(pid,p){var options={},ins=document.querySelectorAll('.product-list .pl-item[data-pid="'.concat(pid,'"] .pl-variant-option.selected input')),ins=(0<ins.length&&(options.variant_option1=ins[0].value),1<ins.length&&(options.variant_option2=ins[1].value),2<ins.length&&(options.variant_option3=ins[2].value),document.querySelector('.product-list .pl-item[data-pid="'.concat(pid,'"] .pl-image img')));return ins&&ins.src?options.imageUrl=ins.src:p&&p.imageUrl&&(pid=p.imageUrl.replace("images.funnelish.com","img.funnelish.com"),options.imageUrl="".concat(pid,"?height=60&width=60&auto=webp&fit=bounds")),options}},{key:"getSelectedProducts",value:function(){var _this8=this,hasOb=!1,list=[];return document.querySelectorAll(".product-list [name='product-id']:checked, .order-bump [name='product-id']:checked").forEach(function(x){var p;x.value&&("ob-1"===x.value?hasOb=!0:(p=_this8.findProduct(x.value),list.push(_objectSpread({product:p,qty:1},_this8.getSelectedOptions(x.value,p)))))}),document.querySelectorAll(".product-list [name='product-qty']").forEach(function(x){var p,productId=x.getAttribute("data-product-id");x.value&&productId&&0<(x=parseInt(x.value))&&(p=_this8.findProduct(productId),list.push(_objectSpread({product:p,qty:x},_this8.getSelectedOptions(productId,p))))}),hasOb&&this.orderBump&&list.push({product:this.orderBump,qty:1}),list}},{key:"getPrice",value:function(product,qty){var option,newPrice=2<arguments.length&&void 0!==arguments[2]&&arguments[2],variant=3<arguments.length&&void 0!==arguments[3]&&arguments[3],newPrice=newPrice?this.fixedPrice(newPrice):this.fixedPrice(product?product.price:0);return variant&&(option=product.options.find(function(o){return o.title===variant}))&&option.price&&(newPrice=this.fixedPrice(option.price)),1<qty&&(newPrice=this.fixedPrice(parseFloat(newPrice)*qty)),{dp:this.currencies.formatPrice(newPrice,this.currency(),product?product.displayPrice:""),price:newPrice}}},{key:"fixedPrice",value:function(price){return["COP","JPY","VND","KRW"].includes(this.currency())?price.toFixed(0):price.toFixed(2)}},{key:"updateSummary",value:function(){var _this9=this,products=this.getSelectedProducts(),oSums=document.querySelectorAll(".order-summary .os-items"),total=0;products.forEach(function(p){var product=p.product,qty=p.qty,p=[p.variant_option1,p.variant_option2,p.variant_option3].filter(Boolean).join(" / "),product=_this9.getPrice(product,qty,!1,p).price;total+=parseFloat(product)}),oSums.forEach(function(items){var html="",hasImages=!1,sum=items.closest(".order-summary");sum&&sum.classList.contains("__images")&&(hasImages=!0),products.forEach(function(p){var imgHtml,product=p.product,qty=p.qty,qtyHtml="",vt=(1<qty&&(qtyHtml='<span class="os-qty">x '.concat(qty," pcs</span>")),[p.variant_option1,p.variant_option2,p.variant_option3].filter(Boolean).join(" / ")),dp=_this9.getPrice(product,qty,!1,vt).dp,innerHtml="",innerHtml=hasImages&&(p.imageUrl||product.imageUrl)?(imgHtml="",(p.imageUrl||product.imageUrl)&&(qtyHtml='<span class="qty">'.concat(qty||"1","</span>"),imgHtml='<img class="product-icon" src="'.concat(p.imageUrl||product.imageUrl,'"  />')),'<div class="os-image" >\n                                    '.concat(imgHtml,"\n                                    ").concat(qtyHtml,'\n                                </div>\n                                <div class="os-name __has-image">\n                                    <span>').concat(product.name,"</span>\n                                    ").concat(vt?'<span class="os-voption">'.concat(vt,"</span>"):"","\n                                </div>")):'<div class="os-name">'.concat(product.name+(vt?'<span class="os-voption">&nbsp;&nbsp; ● &nbsp;&nbsp;'.concat(vt,"</span>"):""),"\n                                ").concat(qtyHtml,"</div>"),qty='<div class="os-row">\n                                '.concat(innerHtml,'\n                                <div class="os-price">').concat(dp,"</div>\n                            </div>");html+=qty}),items.innerHTML=html});document.querySelectorAll(".order-summary .__subtotal-row .os-price").forEach(function(x){x.innerHTML=_this9.currencies.formatPrice(_this9.fixedPrice(total),_this9.currency())}),this.discount&&this.discount.discount_value&&(value=this.discount.discount_value,"percentage"===this.discount.discount_type&&(value=total*(value/100)),document.querySelectorAll(".order-summary .__discount-row .os-price").forEach(function(x){x.innerHTML="- "+_this9.currencies.formatPrice(_this9.fixedPrice(value),_this9.currency())}),total-=value);var value,oSums=document.querySelectorAll(".order-summary .__tax-row");this.tax?(oSums.forEach(function(x){x.classList.remove("hidden"),x.closest(".os-subtotal").classList.remove("hidden"),x.querySelector(".os-price").innerHTML=_this9.currencies.formatPrice(_this9.fixedPrice(_this9.tax.amount||"0"),_this9.currency()),x.querySelector(".os-name .__value").innerHTML=" (% ".concat(_this9.fixedPrice(_this9.tax.rate||"0.00"),")")}),total+=this.tax.amount):oSums.forEach(function(x){x.classList.add("hidden")}),this.tax||this.discount?document.querySelectorAll(".order-summary .os-subtotal").forEach(function(x){x.classList.remove("hidden")}):document.querySelectorAll(".order-summary .os-subtotal").forEach(function(x){x.classList.add("hidden")}),total<0&&(console.error("negative total ",total),total=0),document.querySelectorAll(".order-summary .os-total .os-price, .order-summary .__total").forEach(function(x){x.innerHTML=_this9.currencies.formatPrice(_this9.fixedPrice(total),_this9.currency())})}},{key:"setupOrderSummary",value:function(){var _this10=this,oSums=(document.addEventListener("change",function(e){"product-id"!==e.target.name&&"product-qty"!==e.target.name||_this10.updateSummary()}),document.querySelectorAll(".order-summary")),d=(oSums.forEach(function(sum){var input,_rem,h=sum.querySelector(".os-collapse-header"),content=sum.querySelector(".os-content"),inner=sum.querySelector(".os-inner-container");content&&inner&&(sum.classList.contains("__collapsable")&&(new ResizeObserver(function(){var height=content.clientHeight;inner.style.height=sum.classList.contains("__open")?height+"px":"0px"}).observe(content),h)&&h.addEventListener("click",function(){var height=content.clientHeight,isOpen=(sum.classList.toggle("__open"),sum.classList.contains("__open"));inner.style.height=isOpen?height+"px":"0px"}),h=sum.querySelector(".os-discount-box .__apply"),input=sum.querySelector(".os-discount-box .__input"),_rem=sum.querySelector(".__current-discount .__remove"),input)&&h&&(input.addEventListener("keypress",function(e){"Enter"===e.key&&_this10.applyDiscount(input.value,oSums)}),h.addEventListener("click",function(){_this10.applyDiscount(input.value,oSums)}),_rem.addEventListener("click",function(){_this10.applyDiscount("",oSums)}))}),this.getQueryParam("discount"));d&&this.applyDiscount(d,oSums)}},{key:"applyDiscount",value:(_applyDiscount=_asyncToGenerator(_regeneratorRuntime().mark(function _callee(code,oSums){var setError,startLoading,stopLoading,res,_this11=this;return _regeneratorRuntime().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(setError=function(error){oSums.forEach(function(sum){sum=sum.querySelector(".os-discount-box .__discount-error");sum&&((sum.innerText=error)?sum.classList.remove("hidden"):sum.classList.add("hidden"))})},startLoading=function(){document.querySelectorAll(".order-summary .__apply").forEach(function(btn){var spinner=document.createElement("div");spinner.innerHTML=_this11.spinnerHtml,btn.classList.add("loading"),btn.appendChild(spinner)})},stopLoading=function(){document.querySelectorAll(".order-summary .__apply .spinner").forEach(function(s){s.closest(".__apply").classList.remove("loading"),s.remove()})},this.discount=null,setError(""),oSums.forEach(function(sum){var input=sum.querySelector(".os-discount-box .__input"),_curDiscount=sum.querySelector(".__current-discount"),_value=sum.querySelector(".__current-discount .__value"),_discRow=sum.querySelector(".__discount-row"),subtotal=sum.querySelector(".os-subtotal"),sum=sum.querySelector(".__discount-row .__value");input&&_curDiscount&&_discRow&&_value&&(input.value="",_value.innerText="",sum.innerText="",_curDiscount.classList.add("hidden"),_discRow.classList.add("hidden"),subtotal.classList.add("hidden"))}),_context.prev=6,code){_context.next=9;break}return _context.abrupt("return");case 9:return startLoading(),_context.next=13,this.post("/discounts/apply",_objectSpread(_objectSpread({},this.getAuthHeader()),{},{is_typ:this.isTYP(),discount_code:code,amount:0,cid:this.getCID()}));case 13:if((res=_context.sent).error)return setError(res.error),_context.abrupt("return");_context.next=17;break;case 17:this.discount=res,code=res.discount_code,_context.next=26;break;case 21:return _context.prev=21,_context.t0=_context.catch(6),setError("couldn't apply given discount code"),console.error(_context.t0),_context.abrupt("return");case 26:return _context.prev=26,stopLoading(),this.trigger("discount_applied",this.discount),_context.finish(26);case 30:oSums.forEach(function(sum){var input=sum.querySelector(".os-discount-box .__input"),_curDiscount=sum.querySelector(".__current-discount"),_value=sum.querySelector(".__current-discount .__value"),_discRow=sum.querySelector(".__discount-row"),subtotal=sum.querySelector(".os-subtotal"),sum=sum.querySelector(".__discount-row .__value");input&&_curDiscount&&_discRow&&_value&&(input.value=code,_value.innerText=code,sum.innerText=code,_curDiscount.classList.remove("hidden"),_discRow.classList.remove("hidden"),subtotal.classList.remove("hidden"))}),this.updateSummary();case 32:case"end":return _context.stop()}},_callee,this,[[6,21,26,30]])})),function(_x,_x2){return _applyDiscount.apply(this,arguments)})},{key:"setupCountries",value:(_setupCountries=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(){var els,elStates,elCities,frag,i,c,_e,_i,countryEl,_this12=this;return _regeneratorRuntime().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:for(els=document.querySelectorAll('.fe-countries,select[data-type="country"],select[data-type="shipping_country"]'),elStates=document.querySelectorAll(".fe-states"),elCities=document.querySelectorAll(".fe-cities"),frag=document.createDocumentFragment(),i=0;i<this.countries.list.length;i++)c=this.countries.list[i],(_e=document.createElement("option")).value=c.c,c.disabled&&(_e.disabled=!0),_e.innerText=c.l,frag.appendChild(_e);els.forEach(function(x){x.classList.contains("fe-countries")&&x.appendChild(frag.cloneNode(!0)),x.value="";var firstOption=x.querySelector("option");x.dataset&&x.dataset.placeholder?firstOption&&(firstOption.innerHTML=x.dataset.placeholder):firstOption&&(firstOption.selected=!0,x.value=firstOption.value,x.dispatchEvent(new Event("input",{bubbles:!0}))),(elStates.length||elCities.length)&&x.addEventListener("input",_asyncToGenerator(_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this12.countryChanged(x,elStates,elCities);case 2:case"end":return _context2.stop()}},_callee2)})))}),_i=0;case 7:if(_i<els.length)return countryEl=els[_i],_context3.next=11,this.countryChanged(countryEl,elStates);_context3.next=14;break;case 11:_i++,_context3.next=7;break;case 14:case"end":return _context3.stop()}},_callee3,this)})),function(){return _setupCountries.apply(this,arguments)})},{key:"countryChanged",value:(_countryChanged=_asyncToGenerator(_regeneratorRuntime().mark(function _callee4(countryEl,elStates,elCities){var code,details,frag,i,c,_e2;return _regeneratorRuntime().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(countryEl&&countryEl.value){_context4.next=3;break}return elStates.forEach(function(el){var op;el.innerHTML="",el.value="",el.dataset&&el.dataset.placeholder?((op=document.createElement("option")).value="",op.innerHTML=el.dataset.placeholder,op.disabled=!0,op.selected=!0,el.prepend(op)):(op=el.querySelector("option"))&&(op.selected=!0,el.value=op.value,el.dispatchEvent(new Event("input",{bubbles:!0})))}),_context4.abrupt("return");case 3:if(_context4.prev=3,code=countryEl.value,this.startLoadingFe(),this.countryDetails||(this.countryDetails=[]),details=this.countryDetails[code]){_context4.next=14;break}return _context4.next=11,this.post("/countries/".concat(code,"/details"),_objectSpread({},this.getAuthHeader()));case 11:(details=_context4.sent)&&!details.error||(console.error("invalid country",details),details=null),this.countryDetails[code]=details;case 14:if(frag=document.createDocumentFragment(),details.has_states&&details.states&&details.states.length)for(i=0;i<details.states.length;i++)c=details.states[i],(_e2=document.createElement("option")).value=("US"===code||"CA"===code)&&c.iso2||c.name,_e2.innerText=c.name,frag.appendChild(_e2);elStates.forEach(function(el){var op,_container;"country"===countryEl.name&&"state"!==el.name||"shipping_country"===countryEl.name&&"shipping_state"!==el.name||(el.innerHTML="",el.appendChild(frag.cloneNode(!0)),el.value="",el.dataset&&el.dataset.placeholder&&((op=document.createElement("option")).value="",op.innerHTML=el.dataset.placeholder,op.disabled=!0,op.selected=!0,el.prepend(op)),(el=(op=el.closest(".form-element")).parentElement).classList.contains("element-wrapper")&&(el=(op=el).parentElement),details.has_states&&details.states&&details.states.length?(op.classList.remove("hidden"),el.classList.contains("container-box")&&el.children.length<=1&&((_container=el.closest(".container"))&&_container.children.length<=1&&_container.classList.remove("hidden"),el.classList.remove("hidden"))):(op.classList.add("hidden"),el.classList.contains("container-box")&&el.children.length<=1&&((_container=el.closest(".container"))&&_container.children.length<=1&&_container.classList.add("hidden"),el.classList.add("hidden"))))}),_context4.next=22;break;case 19:_context4.prev=19,_context4.t0=_context4.catch(3),console.error(_context4.t0);case 22:return _context4.prev=22,this.stopLoadingFe(),_context4.finish(22);case 25:case"end":return _context4.stop()}},_callee4,this,[[3,19,22,25]])})),function(_x3,_x4,_x5){return _countryChanged.apply(this,arguments)})},{key:"startLoadingFe",value:function(){var _this13=this;document.querySelectorAll("select.fe-states,select.fe-countries").forEach(function(x){var spinner=document.createElement("div"),x=(spinner.innerHTML=_this13.spinnerHtml,x.closest(".fe-select"));x.classList.add("loading"),x.appendChild(spinner)})}},{key:"stopLoadingFe",value:function(){document.querySelectorAll("select.fe-states,select.fe-countries").forEach(function(x){x=x.closest(".fe-select");x.querySelectorAll(".spinner").forEach(function(y){y.remove()}),x.classList.remove("loading")})}},{key:"startLoading",value:function(){var _this14=this;document.querySelectorAll('a[href="#submit-1st-step"], a[href="#submit-step"], a[href^="#yes-link"]').forEach(function(x){var spinner=document.createElement("div");spinner.innerHTML=_this14.spinnerHtml,x.classList.add("loading"),x.appendChild(spinner)}),document.querySelectorAll(".payment-form").forEach(function(form){form.classList.add("loading")})}},{key:"stopLoading",value:function(){document.querySelectorAll('a[href="#submit-1st-step"], a[href="#submit-step"], a[href^="#yes-link"]').forEach(function(x){x.querySelectorAll(".spinner").forEach(function(y){y.remove()}),x.classList.remove("loading")}),document.querySelectorAll(".payment-form").forEach(function(form){form.classList.remove("loading")})}},{key:"visible",value:function(element){return!(null===element.offsetParent)}},{key:"validateEmail",value:function(str){str=str.trim();return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(str)}},{key:"getQueryParam",value:function(name){name=RegExp("[?&]"+name+"=([^&]*)").exec(window.location.search);return name&&decodeURIComponent(name[1].replace(/\+/g," "))}},{key:"storeUTMTags",value:function(){var _this15=this;this.utmTags.forEach(function(tag){var v=_this15.getQueryParam(tag)||"";v&&localStorage.setItem(tag,v)}),localStorage.getItem("referrer")||""||localStorage.setItem("referrer",document.referrer||"")}},{key:"getUTMTags",value:function(){var r=[],fbc=(this.utmTags.forEach(function(tag){try{var v=localStorage.getItem(tag)||"";v&&r.push({name:tag,value:v})}catch(ex){console.warn(ex)}}),this.getCookie("_fbc")),fbc=(fbc&&r.push({name:"fbc",value:fbc}),this.getCookie("_fbp"));return fbc&&r.push({name:"fbp",value:fbc}),r.push({name:"user_agent",value:navigator.userAgent}),r.push({name:"referrer",value:localStorage.getItem("referrer")||""}),r.push({name:"session_id",value:this.getCookie("session_id")||""}),r}},{key:"firstInvalidInput",value:function(){for(var els=document.querySelectorAll(".form-element .invalid"),i=0;i<els.length;i++)if(this.visible(els[i]))return els[i];return null}},{key:"visibleEmailInput",value:function(){for(var els=document.querySelectorAll('.form-element input[name="email"]'),i=0;i<els.length;i++)if(this.visible(els[i]))return els[i];return null}},{key:"validateFields",value:function(){var _this16=this,soft=0<arguments.length&&void 0!==arguments[0]&&arguments[0],data={meta:this.getUTMTags()},failed=!1,firstInvalid=(document.querySelectorAll(".form-element input, .form-element textarea, .form-element select").forEach(function(input){var isHidden=!1,fe=(_this16.visible(input)||(isHidden=!0),input.closest(".form-element")),root="SELECT"===input.tagName?input.closest(".fe-select"):input;if("checkbox"!==input.type&&"radio"!==input.type||(root=input.closest("label")),fe&&root){if(input.name){if("radio"===input.type){var name=input.dataset.name;if(!name)return void console.error("Error: custom input field does not have any data name.");var checkedOne=document.querySelector('input[type="radio"][name="'.concat(input.name,'"]:checked')),checkedOne=checkedOne?checkedOne.value:"";data.meta.push({name:name,value:checkedOne}),_this16.storeCustomerField(name,checkedOne,!0)}else if("custom"===input.name){name=input.dataset.name;if(!name)return void console.error("Error: custom input field does not have any data name.");data.meta.push({name:name,value:input.value}),_this16.storeCustomerField(name,input.value,!0)}else!input.value||isHidden&&data[input.name]||(data[input.name]=input.value,_this16.storeCustomerField(input.name,input.value));if(fe.classList.contains("required"))if("checkbox"!==input.type||input.checked)if("radio"===input.type)document.querySelector('input[type="radio"][name="'.concat(input.name,'"]:checked'))?root.classList.remove("invalid"):(soft||root.classList.add("invalid"),isHidden||(failed=!0));else if(input.value)if("email"===input.name){if(!_this16.validateEmail(input.value)){if(soft||root.classList.add("invalid"),isHidden&&funnelish.isOrderForm()){checkedOne=_this16.visibleEmailInput();if(checkedOne&&_this16.validateEmail(checkedOne.value))return}isHidden&&!funnelish.isOrderForm()||(failed=!0,console.error("Error: required email input value is invalid."))}}else root.classList.remove("invalid");else soft||root.classList.add("invalid"),isHidden||(failed=!0);else soft||root.classList.add("invalid"),isHidden||(failed=!0)}}else console.error("Error: invalid input field",input)}),this.firstInvalidInput());return firstInvalid&&!soft&&firstInvalid.scrollIntoView(),failed&&!soft?(console.error("Error: invalid field(s).",firstInvalid),!1):(data.full_name?(data.full_name=data.full_name.trim(),data.first_name=data.full_name,0<(firstInvalid=data.full_name.lastIndexOf(" "))&&(data.first_name=data.full_name.substring(0,firstInvalid).trim(),data.last_name=data.full_name.substring(firstInvalid+1).trim()),this.storeCustomerField("first_name",data.first_name),this.storeCustomerField("last_name",data.last_name)):data.first_name&&(data.first_name=data.first_name.trim(),data.last_name||(data.last_name=""),data.last_name=data.last_name.trim(),data.full_name=data.first_name.trim()+(data.last_name?" "+data.last_name.trim():""),this.storeCustomerField("full_name",data.full_name)),data.phone&&15<data.phone.length&&(data.phone=data.phone.substring(0,15)),data.email&&(data.optin_email=data.email.trim(),this.storeCustomerField("email",data.optin_email),delete data.email),data)}},{key:"storeCustomerField",value:function(field,value){var isMeta=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{localStorage.setItem("fnsh.core.customer.".concat(isMeta?"meta.":"").concat(field),value)}catch(e){console.warn(e)}}},{key:"restoreCustomer",value:function(){try{document.querySelectorAll(".form-element input, .form-element textarea, .form-element select").forEach(function(i){var fe=i.closest(".form-element"),root="SELECT"===i.tagName?i.closest(".fe-select"):i,name=i.name;if(fe&&root&&name){if("custom"===name){if(!(name=i.dataset.name))return void console.warn("Error: custom input field does not have any data name.");name="meta.".concat(name)}fe=localStorage.getItem("fnsh.core.customer.".concat(name));if(fe)if("SELECT"===i.tagName)try{var op=i.querySelector('option[value="'.concat(fe,'"]'));op&&(i.value=fe,op.selected=!0,i.dispatchEvent(new Event("input",{bubbles:!0})))}catch(e){console.warn(e)}else i.value=fe,i.dispatchEvent(new Event("input",{bubbles:!0}))}})}catch(e){console.warn(e)}}},{key:"validateOptin",value:(_validateOptin=_asyncToGenerator(_regeneratorRuntime().mark(function _callee5(customer){var firstVisibleInput,_this17=this;return _regeneratorRuntime().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.prev=0,_context5.next=3,this.post(this.pageUrl,_objectSpread(_objectSpread({},this.getAuthHeader()),{},{event:"validate",customer:customer}));case 3:if(_context5.sent.email_valid)_context5.next=14;else{if(firstVisibleInput=null,document.querySelectorAll('.form-element input[name="email"]').forEach(function(input){var parent;_this17.visible(input)&&((parent=input.closest(".form-element"))&&(parent.classList.add("invalid"),parent.classList.remove("valid")),input.classList.add("invalid"),input.classList.remove("valid"),firstVisibleInput=firstVisibleInput||input)}),firstVisibleInput)return firstVisibleInput.scrollIntoView(),_context5.abrupt("return",!1);_context5.next=13}break;case 13:case 14:return _context5.abrupt("return",!0);case 17:_context5.prev=17,_context5.t0=_context5.catch(0),console.error("ERROR: Couldn't validate customer! ",_context5.t0);case 20:case"end":return _context5.stop()}},_callee5,this,[[0,17]])})),function(_x6){return _validateOptin.apply(this,arguments)})},{key:"autoOptin",value:(_autoOptin=_asyncToGenerator(_regeneratorRuntime().mark(function _callee6(parent,e){var data;return _regeneratorRuntime().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.prev=0,parent.classList.add("validating"),_context6.next=4,this.validateFields(!0);case 4:if(data=_context6.sent){_context6.next=7;break}return _context6.abrupt("return");case 7:return _context6.next=9,this.post(this.pageUrl,_objectSpread(_objectSpread({},this.getAuthHeader()),{},{event:"auto-optin",customer:data}));case 9:_context6.sent.email_valid?(parent.classList.remove("invalid"),parent.classList.add("valid")):(parent.classList.add("invalid"),parent.classList.remove("valid")),_context6.next=16;break;case 13:_context6.prev=13,_context6.t0=_context6.catch(0),console.error("ERROR: Couldn't record optin! ",_context6.t0);case 16:return _context6.prev=16,parent.classList.remove("validating"),_context6.finish(16);case 19:case"end":return _context6.stop()}},_callee6,this,[[0,13,16,19]])})),function(_x7,_x8){return _autoOptin.apply(this,arguments)})},{key:"submitFirstForm",value:(_submitFirstForm=_asyncToGenerator(_regeneratorRuntime().mark(function _callee7(){var data,res,hasTwoSteps,item,_this18=this;return _regeneratorRuntime().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_context7.prev=0,this.startLoading(),data=this.validateFields()){_context7.next=5;break}return _context7.abrupt("return");case 5:return _context7.next=7,this.post(this.pageUrl,_objectSpread(_objectSpread({},this.getAuthHeader()),{},{event:"optin",customer:data}));case 7:if((res=_context7.sent)&&"ok"===res.status){_context7.next=10;break}throw res;case 10:hasTwoSteps=!1,document.querySelectorAll(".two-step-form").forEach(function(x){x.classList.remove("step-1"),x.classList.add("step-2"),_this18.visible(x)&&(hasTwoSteps=x)}),hasTwoSteps?(item=hasTwoSteps.querySelector(".tsf-header .tsf-item:last-child"))&&this.smoothScroll.animateScroll(item,!1):res.data&&res.data.next&&(window.location=res.data.next),_context7.next=20;break;case 16:_context7.prev=16,_context7.t0=_context7.catch(0),console.error("ERROR: Couldn't record optin! ",_context7.t0),alert("Something went wrong! Couldn't take your order, try again later.");case 20:return _context7.prev=20,this.stopLoading(),_context7.finish(20);case 23:case"end":return _context7.stop()}},_callee7,this,[[0,16,20,23]])})),function(){return _submitFirstForm.apply(this,arguments)})},{key:"post",value:(_post=_asyncToGenerator(_regeneratorRuntime().mark(function _callee8(){var data,url,_args8=arguments;return _regeneratorRuntime().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return url=0<_args8.length&&void 0!==_args8[0]?_args8[0]:"",data=1<_args8.length&&void 0!==_args8[1]?_args8[1]:{},_context8.next=4,fetch(url,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(data)});case 4:return url=_context8.sent,_context8.abrupt("return",url.json());case 6:case"end":return _context8.stop()}},_callee8)})),function(){return _post.apply(this,arguments)})},{key:"loadScript",value:function(src,callback){var dataset=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=document.createElement("script");s.src=src,s.type="text/javascript",s.async=!1,dataset&&Object.keys(dataset).forEach(function(d){return s.dataset[d]=dataset[d]}),callback&&(s.onload=function(){return callback()}),document.getElementsByTagName("head")[0].appendChild(s)}},{key:"twoStepGoBack",value:function(){document.querySelectorAll(".two-step-form").forEach(function(x){x.classList.remove("step-2"),x.classList.add("step-1")})}},{key:"setup2StepForm",value:function(){var _this19=this;document.querySelectorAll(".two-step-form .tsf-back, .two-step-form .tsf-item:first-child .tsf-number").forEach(function(x){x.addEventListener("click",function(e){_this19.twoStepGoBack()})})}},{key:"setupInputs",value:function(){var _this20=this;document.querySelectorAll(".form-element.required input, .form-element.required select").forEach(function(e){var debounce;"email"===e.name&&"true"==e.dataset.auto_optin&&(debounce=_this20.debounce(function(){var parent;_this20.validateEmail(e.value)&&(parent=e.closest(".form-element")||e,_this20.autoOptin(parent,e))},1e3,!1),e.addEventListener("input",debounce)),e.addEventListener("change",function(ev){var t=ev.target;"SELECT"!==t.tagName||(t=t.closest(".fe-select"))?t.classList.contains("invalid")&&t.classList.remove("invalid"):console.warn("Error: invalid select field.",ev.target)})})}},{key:"validateProductList",value:function(isValid){for(var pl,arr=document.querySelectorAll(".product-list"),i=0;i<arr.length;i++)this.visible(arr[i])&&(pl=arr[i],isValid?pl.classList.remove("invalid"):(pl.classList.add("invalid"),pl.scrollIntoView()))}},{key:"setupButtons",value:function(){var _this21=this;document.querySelectorAll('a[href="#submit-step"],a[href="#next-step"],a[href^="#yes-link"],a[href="#no-link"],a[href="#submit-1st-step"]').forEach(function(btn){var _ref2;btn.addEventListener("click",(_ref2=_asyncToGenerator(_regeneratorRuntime().mark(function _callee9(e){var a,href,products,hash,_products;return _regeneratorRuntime().wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(a=e.target,href=a.getAttribute("href"),"#submit-step"!==a.hash){_context9.next=19;break}if(!_this21.isOrderForm()){_context9.next=16;break}if((products=_this21.getSelectedProducts())&&products.length){_context9.next=10;break}return _this21.validateProductList(!1),alert("No product(s) selected! Select a product to proceed."),console.error("no products selected!"),_context9.abrupt("return");case 10:if(_this21.validateProductList(!0),_this21.validateFields()){_context9.next=13;break}return _context9.abrupt("return");case 13:_this21.trigger("of_purchase",products),_context9.next=17;break;case 16:_this21.trigger("optin",!1);case 17:_context9.next=36;break;case 19:if(!(href&&0<=href.indexOf("#yes-link")||a.hash&&0<=a.hash.indexOf("#yes-link"))){_context9.next=35;break}if(hash=(a.hash||href).substr(1),hash=(hash=hash.replace("yes-link-","").replace("yes-link",""))||0,0!==(hash=parseInt(hash))){_context9.next=32;break}if((_products=_this21.getSelectedProducts())&&_products.length){_context9.next=31;break}return _this21.validateProductList(!1),alert("No product(s) selected! Select a product to proceed."),console.error("no products selected!"),_context9.abrupt("return");case 31:_this21.validateProductList(!0);case 32:_this21.trigger("oto_yes",hash),_context9.next=36;break;case 35:"#no-link"===a.hash?_this21.trigger("oto_no"):"#next-step"===a.hash||"#next-step"===href?_this21.trigger("next_step"):"#submit-1st-step"===a.hash&&_this21.trigger("optin",!0);case 36:case"end":return _context9.stop()}},_callee9)})),function(_x9){return _ref2.apply(this,arguments)}))})}},{key:"stop",value:function(){this.alive=!1}},{key:"initApp",value:function(app){try{app.instance.init(app),this.trigger("app_loaded",app.name,app.id)}catch(e){console.error('ERROR: "'.concat(app.name||app.id,'" App failed to init.'),e)}}},{key:"registerApp",value:function(id,instance){if(console.log("registerApp",id,instance),this.apps){for(var i=0;i<this.apps.length;i++)if(this.apps[i].id===id)return this.apps[i].instance=instance,void this.initApp(this.apps[i]);console.error("ERROR: app not found.",id,instance)}}},{key:"loadApps",value:function(){var fpay,_this22=this;console.log("loading apps"),this.apps&&((fpay=this.getFPay())&&(this.isOrderForm()||this.isOTO()?this.loadScript("/apps/".concat(this.funnelId,"/").concat(fpay.id)):setTimeout(function(){_this22.loadScript("/apps/".concat(_this22.funnelId,"/").concat(fpay.id))},5e3)),setTimeout(function(){for(var i=0;i<_this22.apps.length;i++)8!==_this22.apps[i].id&&_this22.loadScript("/apps/".concat(_this22.funnelId,"/").concat(_this22.apps[i].id))},4300))}},{key:"getFPay",value:function(){if(this.apps)for(var i=0;i<this.apps.length;i++)if(8===this.apps[i].id)return this.apps[i];return null}},{key:"setupVideos",value:function(){var videoEls=document.querySelectorAll(".video-native"),token=this.getCookie("X-ResourcesToken"),page=this.getCookie("X-Page"),lazyVideoObserver=null;"IntersectionObserver"in window&&(lazyVideoObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(videoEntry){var overlayVideo,overlay,src;videoEntry.isIntersecting&&(overlayVideo=null==(overlay=(videoEntry=videoEntry.target).querySelector(".__video-overlay"))?void 0:overlay.querySelector("video"),overlay=overlay?videoEntry.querySelector("video.__video"):videoEntry.querySelector("video"),overlayVideo?(src=overlayVideo.dataset.src+"?token=".concat(token,"&page=").concat(page),overlayVideo.setAttribute("src",src),overlayVideo.play()):overlay&&(src=overlay.dataset.src+"?token=".concat(token,"&page=").concat(page),overlay.setAttribute("src",src),overlay.hasAttribute("autoplay")&&overlay.play(),videoEntry.classList.add("loaded"),lazyVideoObserver.unobserve(videoEntry)))})}));videoEls.forEach(function(el){try{var src,_src2,overlay=el.querySelector(".__video-overlay"),overlayVideo=null==overlay?void 0:overlay.querySelector("video"),v=overlay?el.querySelector("video.__video"):el.querySelector("video");v&&v.dataset.src&&(overlay&&overlayVideo&&overlay.addEventListener("click",function(){var src;v.hasAttribute("src")||(src=v.dataset.src+"?token=".concat(token,"&page=").concat(page),v.setAttribute("src",src)),v.play(),overlay.classList.add("hidden"),overlayVideo.classList.add("hidden")}),v.addEventListener("play",function(){console.log("play",v,el),el.classList.add("playing")}),v.addEventListener("pause",function(){console.log("pause",v,el),el.classList.remove("playing")}),v.addEventListener("ended",function(){console.log("ended",v,el),el.classList.remove("playing")}),v.addEventListener("click",function(){v.hasAttribute("src")||(src=v.dataset.src+"?token=".concat(token,"&page=").concat(page),v.setAttribute("src",src));var src=el.classList.contains("playing");el.dataset.controls?0===v.readyState&&v.play():el.dataset.pause?src?v.pause():v.play():el.dataset.autoplay?src||v.play():src||el.dataset.controls||v.play()}),el.dataset.lazyload&&"IntersectionObserver"in window?lazyVideoObserver.observe(el):overlayVideo?(overlayVideo.hasAttribute("src")||(src=overlayVideo.dataset.src+"?token=".concat(token,"&page=").concat(page),overlayVideo.setAttribute("src",src)),overlayVideo.play()):(_src2=v.dataset.src+"?token=".concat(token,"&page=").concat(page),v.setAttribute("src",_src2),v.hasAttribute("autoplay")&&v.play()))}catch(e){console.error("Loading video error",e)}})}},{key:"setupVimeo",value:function(){var vs=document.querySelectorAll(".video>.vimeo-player");vs&&vs.length&&this.loadScript("https://player.vimeo.com/api/player.js",function(){vs.forEach(function(v){"true"===v.parentElement.dataset.lazyload&&setTimeout(function(){var iframe=v.querySelector("iframe");iframe.src=iframe.dataset.src,delete iframe.dataset.src},2500)})})}},{key:"trackVisit",value:(_trackVisit=_asyncToGenerator(_regeneratorRuntime().mark(function _callee10(){var meta,endpoint;return _regeneratorRuntime().wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.prev=0,meta={},this.getUTMTags().forEach(function(m){try{var v=m.value;v&&["_raeid","_raid","_sms_id"].includes(m.name)&&(v=parseInt(v)),meta[m.name]=v}catch(e){console.warn(e)}}),endpoint="https://analytics."+(this.isBeta()?"beta":"app")+".funnelish.com/view",_context10.next=6,this.post(endpoint,_objectSpread(_objectSpread({},this.getAuthHeader()),{},{cid:this.getCID(),product_id:null,event_id:1,event_name:"pageview",test_mode:this.funnel.test_mode?1:0,currency:this.currency(),country:this.countries.country,city:this.countries.city,latitude:this.countries.latitude,longitude:this.countries.longitude},meta));case 6:(endpoint=_context10.sent)&&endpoint.success&&endpoint.session_id&&this.setCookie("session_id",endpoint.session_id),_context10.next=13;break;case 10:_context10.prev=10,_context10.t0=_context10.catch(0),console.warn(_context10.t0);case 13:case"end":return _context10.stop()}},_callee10,this,[[0,10]])})),function(){return _trackVisit.apply(this,arguments)})},{key:"debounce",value:function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),callNow&&func.apply(context,args)}}},{key:"loadTYPSummary",value:(_loadTYPSummary=_asyncToGenerator(_regeneratorRuntime().mark(function _callee11(){var generateEntryRow,oSums,total,resp,totalTax,discounts,subTotal,totalDiscount,_this23=this;return _regeneratorRuntime().wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(generateEntryRow=function(o,sum){var imgUrl,qty=o.qty,qtyHtml="",hasImages=(1<qty&&(qtyHtml='<span class="os-x">&nbsp;&nbsp;✖&nbsp;&nbsp;</span> <span class="os-qty">'.concat(qty," pcs</span>")),!1),sum=(sum&&sum.classList.contains("__images")&&(hasImages=!0),o.variant_title&&"Main Product"!==o.variant_title?o.variant_title:""),innerHtml="";return innerHtml=hasImages&&(o.image_url||o.variant_image_url)?(hasImages="",imgUrl=(imgUrl=o.variant_image_url||o.image_url).replace("images.funnelish.com","img.funnelish.com"),qtyHtml='<span class="qty">'.concat(qty||"1","</span>"),hasImages='<img class="product-icon" src="'.concat(imgUrl,'?height=220&width=220&auto=webp&fit=bounds"  />'),'<div class="os-image" >\n                                '.concat(hasImages,"\n                                ").concat(qtyHtml,'\n                            </div>\n                            <div class="os-name __has-image">\n                                <span>').concat(o.name,"</span>\n                                ").concat(sum?'<span class="os-voption">'.concat(sum,"</span>"):"","\n                            </div>")):'<div class="os-name">'.concat(o.name+(sum?'<span class="os-voption">&nbsp;&nbsp; ● &nbsp;&nbsp;'.concat(sum,"</span>"):""),"\n                                ").concat(qtyHtml,"</div>"),'<div class="os-row">\n                            '.concat(innerHtml,'\n                            <div class="os-price">').concat(_this23.getCurrencySymbol()," ").concat(_this23.fixedPrice(o.amount*qty),"</div>\n                        </div>")},oSums=document.querySelectorAll(".order-summary"),this.isTYP()&&0<oSums.length)return oSums.forEach(function(sum){sum=sum.querySelector(".os-discount-box");sum&&sum.remove()}),total=0,_context11.next=7,this.post("/order-summary",_objectSpread(_objectSpread({},this.getAuthHeader()),{},{cid:this.getCID()}));_context11.next=15;break;case 7:resp=_context11.sent,(this.orderSummary=resp).success&&resp.orders&&(totalTax=0,discounts=resp.discounts||[],totalDiscount=subTotal=0,resp.orders.forEach(function(o){1===o.product_id?totalTax=o.amount:2===o.product_id?totalDiscount+=o.amount:subTotal+=o.amount*o.qty,total+=o.amount*o.qty}),oSums.forEach(function(sum){var ad,nmR,disRow,html="",items=sum.querySelector(".os-items"),subRow=(resp.orders.forEach(function(o){o.product_id<10||(html+=generateEntryRow(o,sum))}),sum.querySelector(".os-subtotal"));subRow?((0<discounts.length||0<totalTax)&&subRow.classList.remove("hidden"),0<discounts.length&&((disRow=subRow.querySelector(".__discount-row")).classList.remove("hidden"),(ad=disRow.querySelector(".__applied-discount")).classList.remove("hidden"),ad.remove(),nmR=disRow.querySelector(".os-name"),discounts.forEach(function(d){var nAd=ad.cloneNode(!0);nAd.querySelector(".__value").innerText=d.name,nmR.appendChild(nAd)}),disRow.querySelector(".os-price").innerText="- ".concat(_this23.getCurrencySymbol()," ").concat(_this23.fixedPrice(Math.abs(totalDiscount)))),0<totalTax&&((disRow=subRow.querySelector(".__tax-row")).classList.remove("hidden"),disRow.querySelector(".os-price").innerText="- ".concat(_this23.getCurrencySymbol()," ").concat(_this23.fixedPrice(totalTax))),subRow.querySelector(".__subtotal-row .os-price").innerText="".concat(_this23.getCurrencySymbol()," ").concat(_this23.fixedPrice(subTotal))):resp.orders.filter(function(x){return 1===x.product_id}).forEach(function(o){html+=generateEntryRow(o,sum)}),items.innerHTML=html})),total=Math.max(total,0),this.orderSummary.total=total.toFixed(2),document.querySelectorAll(".order-summary .os-total .os-price, .order-summary .__total").forEach(function(x){x.innerHTML="".concat(_this23.getCurrencySymbol()," ").concat(_this23.fixedPrice(total))}),this.trigger("summary_loaded",this.orderSummary);case 15:case"end":return _context11.stop()}},_callee11,this)})),function(){return _loadTYPSummary.apply(this,arguments)})},{key:"setupLazyCodes",value:function(){try{var codes=LAZY_CODES;codes&&codes.length&&codes.forEach(function(code){setTimeout(function(){var documentFragment,range=document.createRange();"body"===code.type?(range.selectNode(document.body),documentFragment=range.createContextualFragment(code.html),document.body.appendChild(documentFragment)):(range.selectNode(document.head),documentFragment=range.createContextualFragment(code.html),document.head.appendChild(documentFragment))},code.delay||0)})}catch(e){console.error(e)}}},{key:"setupBumps",value:function(){document.querySelectorAll(".order-bump .ob-header input").forEach(function(x){x.dataset&&x.dataset.selected&&(x.checked=!0)})}},{key:"openPopup",value:function(path){path=document.querySelector('.popup[data-path="'.concat(path,'"]'));path&&path.classList.add("open")}},{key:"setupPopups",value:function(){var _this24=this;window.addEventListener("click",function(ev){ev=ev.target;ev.classList&&ev.classList.contains("popup")&&ev.classList.remove("open")}),document.querySelectorAll(".popup").forEach(function(popup){function openPopup(){_this24.openPopup(popup.dataset.path)}if(popup.classList.contains("default-popup"))switch(popup.dataset.showon){case"exitIntent":new modalTrigger(openPopup,{trigger:"exitIntent"});break;case"timeout":var timeout=1e3*parseInt(popup.dataset.param1)||5e3;new modalTrigger(openPopup,{trigger:"timeout",timeout:timeout});break;case"scrollDown":timeout=parseInt(popup.dataset.param1)||50;new modalTrigger(openPopup,{trigger:"scrollDown",percentDown:timeout});break;case"scrollDownUp":var timeout=parseInt(popup.dataset.param1)||50,up=parseInt(popup.dataset.param2)||5;new modalTrigger(function(){new modalTrigger(openPopup,{trigger:"scrollUp",percentUp:up})},{trigger:"scrollDown",percentDown:timeout})}document.querySelectorAll('.close-popup,a[href="#close-popup"]').forEach(function(btn){btn.addEventListener("click",function(e){popup.classList.remove("open")})})}),document.querySelectorAll('a[href^="#popup-"]').forEach(function(x){x.addEventListener("click",function(e){e=(e=e.target.hash||"").replace("#popup-","");_this24.openPopup(e)})})}},{key:"setupDynamicValues",value:function(){for(var contact={},i=0;i<localStorage.length;i++){var k=localStorage.key(i),v=localStorage.getItem(k);k.startsWith("fnsh.core.customer.")&&!k.includes(".meta")?contact[k.replace("fnsh.core.customer.","contact.")]=v:k.startsWith("fnsh.core.customer.meta.")&&(contact[k.replace("fnsh.core.customer.meta","contact.meta.")]=v),console.log("".concat(k,": ").concat(v))}window.contact=contact,document.querySelectorAll("span.d-value:not(.evaluated)").forEach(function(x){try{var _v=x.innerText,res=(_v=(_v=(_v=_v.trim()).substring(2,_v.length-2)).trim(),Function('"use strict";return ('.concat(_v,")"))());x.classList.add("evaluated"),x.innerText=res||""}catch(e){console.warn(e)}})}},{key:"setupFaq",value:function(){try{document.querySelectorAll(".faq .faq-header").forEach(function(h){var f=h.parentElement;h.addEventListener("click",function(){f.classList.contains("active")?f.classList.remove("active"):f.classList.add("active")})})}catch(e){console.warn(e)}}},{key:"setupSticky",value:function(){try{var l=document.querySelectorAll(".sticky_show_after");window.addEventListener("scroll",function(){l.forEach(function(e){var a=e.dataset&&e.dataset.show_after?e.dataset.show_after:0;window.scrollY>a?e.classList.add("visible"):e.classList.remove("visible")})})}catch(e){console.warn(e)}}},{key:"init",value:(_init=_asyncToGenerator(_regeneratorRuntime().mark(function _callee12(){var _this25=this;return _regeneratorRuntime().wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return console.log("core.js init"),_context12.prev=1,this.getFPay()&&(this.isOrderForm()||this.isOTO())&&(this.startLoading(),this.on("app_loaded",function(appName,appId){8===appId&&_this25.stopLoading()},this)),this.storeUTMTags(),this.smoothScroll=new smoothScroll,this.setup2StepForm(),this.setupOrderSummary(),this.loadProducts(),_context12.next=10,this.setupCountries();case 10:return this.setupInputs(),this.setupButtons(),this.setupBumps(),this.alive=!0,this.timers(),this.loadApps(),this.setupVideos(),this.updateSummary(),new imagesSlider,_context12.next=21,this.loadTYPSummary();case 21:this.setupVimeo(),this.setupPopups(),this.setupFaq(),this.setupSticky(),this.setupLazyCodes(),new beforeAfterSlider,_context12.next=32;break;case 29:_context12.prev=29,_context12.t0=_context12.catch(1),console.error(_context12.t0);case 32:return _context12.prev=32,_context12.finish(32);case 34:this.restoreCustomer();try{this.trigger("load")}catch(e){console.warn(e)}try{setTimeout(function(){_this25.trackVisit()},4e3)}catch(e){console.warn(e)}case 37:case"end":return _context12.stop()}},_callee12,this,[[1,29,32,34]])})),function(){return _init.apply(this,arguments)})},{key:"checkForms",value:function(){}},{key:"initEvents",value:function(){this.events={oto_yes:[],oto_no:[],optin:[],of_purchase:[],next_step:[],load:[],app_loaded:[],summary_loaded:[],discount_applied:[]}}},{key:"trigger",value:function(event){for(var _len=arguments.length,params=new Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)params[_key-1]=arguments[_key];try{var _e3,_cat$_e3$handler,cat=this.events[event];for(_e3 in cat)try{(_cat$_e3$handler=cat[_e3].handler).call.apply(_cat$_e3$handler,[cat[_e3].scope].concat(params))}catch(ex){console.warn(ex)}}catch(ex){console.error(ex)}try{switch(event){case"of_purchase":console.log("of_purchase",params);break;case"optin":this.submitFirstForm();break;case"oto_yes":console.log("OTO YES",params);break;case"oto_no":console.log("OTO NO",params),this.gotoNextStep(!0);break;case"next_step":console.log("next_step",params),this.gotoNextStep(!0)}}catch(ex){console.error(ex)}}},{key:"getCID",value:function(){return funnelish.getCookie("fnsh.core.cid")}},{key:"gotoNextStep",value:(_gotoNextStep=_asyncToGenerator(_regeneratorRuntime().mark(function _callee13(){var customer,cid,_args13=arguments;return _regeneratorRuntime().wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:if(customer={},0<_args13.length&&void 0!==_args13[0]&&_args13[0]){_context13.next=8;break}if(customer=funnelish.validateFields()){_context13.next=6;break}return _context13.abrupt("return");case 6:_context13.next=9;break;case 8:customer={meta:this.getUTMTags()};case 9:return cid=this.getCID(),_context13.next=12,funnelish.post("/next-step",_objectSpread(_objectSpread({},funnelish.getAuthHeader()),{},{event:"next-step",cid:cid,customer:customer,is_oto:!0,test_mode:this.funnel.test_mode?1:0,currency:this.currency(),country:this.countries.country}));case 12:"ok"===(cid=_context13.sent).status&&cid.data?window.location.href=cid.data.next:(alert("We couldn't process your request at this time!"),console.error("gotoNextStep",cid));case 14:case"end":return _context13.stop()}},_callee13,this)})),function(){return _gotoNextStep.apply(this,arguments)})},{key:"on",value:function(event,handler,scope){try{for(var i in this.events)if(i==event){this.events[i].push({handler:handler,scope:scope});break}}catch(ex){console.warn(ex)}}},{key:"setCookie",value:function(cname,cvalue,exdays){var d=new Date,exdays=(d.setTime(d.getTime()+24*exdays*60*60*1e3),"expires="+d.toUTCString());document.cookie=cname+"="+cvalue+";"+exdays+";path=/"}},{key:"getCookie",value:function(cname){try{for(var name=cname+"=",ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}}catch(e){console.error(e)}return""}},{key:"unsetCookie",value:function(name){document.cookie=name+"=; Max-Age=-99999999;"}}]);var _gotoNextStep,_init,_loadTYPSummary,_trackVisit,_post,_submitFirstForm,_autoOptin,_validateOptin,_countryChanged,_setupCountries,_applyDiscount}();window.funnelish=new editorCore,window.funnelish.init();